@* Component for Navigation Layout *@

@using Microsoft.AspNetCore.Components.Authorization

@inject AuthenticationStateProvider AuthStateProvider
@inject NavigationManager Navigation

<nav>
    @if (isAuthenticated) // Nav links for authenticated users
    {
        <NavLink href="/logout" class="nav-link">Logout</NavLink>
        <NavLink href="/dashboard" class="nav-link">Dashboard</NavLink>
        <NavLink href="/dashboard" class="nav-link">
            <img src="images\logo.png" alt="Goal Grower Logo" width="500" height="500" />
        </NavLink>
    }
    else
    @* Nav links for unauthenticated users *@
    {
        <NavLink href="/">Login</NavLink>
        <NavLink href="/add-user">Register</NavLink>
    }
</nav>

@code {
    private bool isAuthenticated = false;

    // Check authentication state on parameter set
    protected override async Task OnParametersSetAsync()
    {

        var authState = await AuthStateProvider.GetAuthenticationStateAsync();
        isAuthenticated = authState.User.Identity?.IsAuthenticated ?? false;
    }
}